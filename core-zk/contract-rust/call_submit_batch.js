const nearAPI = require("near-api-js");

const { connect, keyStores, utils } = nearAPI;
require("dotenv").config();
let privateKey = process.env.key;
let accountId = process.env.account;

const interact = async () => {
  const keyPair = utils.KeyPair.fromString(privateKey);
  const keyStore = new keyStores.InMemoryKeyStore();
  await keyStore.setKey("mainnet", accountId, keyPair);
  const nearConfig = {
    networkId: "mainnet",
    keyStore: keyStore,
    nodeUrl: "https://rpc.near.gateway.fm/",
  };
  const nearConnection = await connect(nearConfig);
  const account = await nearConnection.account(accountId);

  let res = await account
    .functionCall({
      contractId: accountId,
      methodName: "update_state",
      args: {
        input: [
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "99",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "101",
          "3878488416877516803540612571302548284843124722562072754219718764029137621843",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "54400338722927882010739357306608455014511100705",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1026190260121634159514598314348314329180743589570",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "1",
          "3650612311250861502459099542925272370042193484542444235360054890957424519636",
          "5559870861255381819459970315322845225570507168360421688492131090222602672842",
          "7370158782569607819487855537678577017464196340733546255179438989854964125747",
          "7464481246782276208403558728896833053310750015668799178802450939738769244408",
          "7503676742221586899199340919972858588277467568946092801506829286332540269637",
          "8645365073493896734646239319518549996750485483639240880627508967957482333687",
          "8846937058038148323808994144921025378314023040731419345850646149651543881306",
          "9113046652598784174427061165037791198369884041947622604836161847592049988077",
          "11084142439897103505872477708805329148861404041183464639063414906761492022456",
          "16688714406346673859303594901532555585591245527988311887019596243041450674621",
          "17209379784338798021779402870936424082776184017819614425547907426874257197860",
          "17342188321117036117195071451759819525230431834191493002796749713384872934343",
          "4231263868940078112895176912917255328854992758647932025171630886612783497973",
          "6450358173064918460986182785195193050099488546459354143153958693760589687979",
          "7364890415696183528485354453276837602058129513740024020168052560782842091313",
          "8425318058859248196176507103127915294305790158206753431196533816647260000024",
          "8583592429915952127802679259381137200662726611864263761151319834139787791240",
          "9624199691647512755059285363047155937358527673606042177815314372811683665315",
          "17285737637532801987591241459911949102144899382754478109819745422223131044025",
          "17701663215238048520695901743396236534877475797340648010475518209686495850810",
          "19045962699014545847346264752237871523343348127666434511166252918213513518184",
          "20351841221647517020738512390657745026944768932594664740220670661709054714438",
          "20544986211852187186123264070356046646860478754291487307310413641361808604081",
          "6166597310027001612506022203153258225800373768583843093907101692109009149464",
          "6785533291867399488280318354675027251661614400062798582824299846315592518679",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100",
          "100"
         ],
        proof: {
          a: {
            x: "4748442986006559283801119259332319491381254516385947896680586196552808897428",
            y: "14395119737497069920287962566813507910069833903249497513156044827371650443830",
          },
          b: {
            x: [
              "6963776678787187551859174727628193154950847122722965511216563053758413807146",
              "6515965420230299961900783383056149613303322360723419967632264418962008714662",
            ],
            y: [
              "12565738623357291777726849396508781360151939863940903994256904311585772130227",
              "18704838045628229886757544960374290444953411318927342773819306306519743679091",
            ],
          },
          c: {
            x: "13431897675997423523515520887609093445020866909792695971573991196750656767445",
            y: "12707547817210007547454426779609155169477282152896469967000980439832541685837",
          },
        },
        batch_num: 1,
        new_state_root:
          "981234798132794871293482713904817239487123948712394871209348172",
      },
      gas: 300000000000000,
    })
    .then((res) => {
      console.log("1", res);
      return res;
    })
    .catch((err) => {
      console.log(err);
      return false;
    });

  console.log(res.transaction.hash);
  console.log(res);
};

interact();
